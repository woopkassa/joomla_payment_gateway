# joomla_payment_gateway
Woopkassa payment gateway for Joomla CMS as a module.

## Требования
Для работы модуля должно быть установлено и включено PHP расширение SOAP.

## Установка
1. Установить модули Wooppay или Wooppay Mobile(в зависимости от того, какой нужен) на странице
Extensions->Manage->Install, нажав на кнопку загрузки, выбрать нужный файл модуля в формате .zip
![Alt text](.README/joomla_1.png?raw=true)
2. Создать способы оплаты на странице Payment Methods, введя необходимую информацию: дать название способу оплаты, поставить Yes на Published, выбрать способ оплаты из списка, выбрать нужную валюту. Затем сохранить введенную информацию, нажав на кнопку Save.
![Alt text](.README/joomla_2.png?raw=true)
3. Перейти на вкладку Configuration и ввести данные
### Пример:
```
Инфраструктура: Тестовый сервер
Логин: test_merch
Пароль: A12345678a
Префикс заказа: mobile
Имя сервиса: test_merch_invoice
```
![Alt text](.README/joomla_3.png?raw=true)

*4. Для работы модуля мобильной оплаты, необходимо создать дополнительное поле в разделе заказа и выполнить следующие пункты:

Переходим в VirtueMart->Configuration->Shopper Fields

Создаем новое поле

Field name = wooppay_auth_code

Field title по желанию, но чтобы он отражал смысл поля

Из дополнительных параметров в положение "Да" мы переводим только Show in cart form и Published

Теперь, если пользователь выберет в заказе мобильную оплату - после первого подтверждения на номер, который он указал вышлется СМС с кодом подтверждения, как только он введет его в это поле, сумма заказа спишется с его баланса.

Переходим в магазин и оплачиваем товар.

